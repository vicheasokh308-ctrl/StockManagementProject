@{
    ViewData["Title"] = "User Management";
}

<div class="content p-4">

    <!-- Search + Buttons + Role Select -->
    <div class="header-controls d-flex flex-wrap align-items-center gap-2 mb-3">

        <!-- Search Box -->
        <input id="searchBox" type="text" class="form-control w-auto flex-grow-1" placeholder="Search..." />

        <!-- Role Selector -->
        <select id="roleSelect" class="form-select w-auto flex-grow-1">
            <option value="">All Roles</option>
            <option value="Admin">Admin</option>
            <option value="Staff">Staff</option>
        </select>

        <!-- Action Buttons -->
        <div class="d-flex flex-wrap gap-2">
            <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#addRoleModal">
                <i class="fa fa-plus"></i> Add Role
            </button>

            <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                <i class="fa fa-user-plus"></i> Add New User
            </button>

            <button class="btn btn-outline-secondary">
                <i class="fa fa-download"></i> Export
            </button>
        </div>
    </div>

    <!-- Selected Role Display -->
    <p id="resultText" class="text-primary fw-bold"></p>

    <!-- User Table -->
    <div class="table-responsive">
        <table class="table table-bordered align-middle shadow-sm bg-white mb-0">
            <thead class="table-light">
                <tr>
                    <th><input type="checkbox" /></th>
                    <th>Full Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Joined Date</th>
                    <th style="width: 80px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr data-role="Admin">
                    <td><input type="checkbox" /></td>
                    <td><img class="profile-img me-1" src="/images/User/Dara.webp" /> John Smith</td>
                    <td>john.smith@gmail.com</td>
                    <td>Admin</td>
                    <td>March 12, 2025</td>
                    <td class="text-center">
                        <i class="fa fa-edit text-primary cursor-pointer" data-bs-toggle="modal" data-bs-target="#editUserModal"></i>
                        <i class="fa fa-trash text-danger cursor-pointer" data-bs-toggle="modal" data-bs-target="#deleteModal"></i>
                    </td>
                </tr>

                <tr data-role="Staff">
                    <td><input type="checkbox" /></td>
                    <td><img class="profile-img me-1" src="/images/User/layla.webp" /> Olivia Bennett</td>
                    <td>ollyben@gmail.com</td>
                    <td>Staff</td>
                    <td>June 27, 2025</td>
                    <td class="text-center">
                        <i class="fa fa-edit text-primary cursor-pointer" data-bs-toggle="modal" data-bs-target="#editUserModal"></i>
                        <i class="fa fa-trash text-danger cursor-pointer" data-bs-toggle="modal" data-bs-target="#deleteModal"></i>
                    </td>
                </tr>

                <tr data-role="Staff">
                    <td><input type="checkbox" /></td>
                    <td><img class="profile-img me-1" src="/images/User/monkey.webp" /> Marcus Reed</td>
                    <td>reed777@gmail.com</td>
                    <td>Staff</td>
                    <td>February 19, 2025</td>
                    <td class="text-center">
                        <i class="fa fa-edit text-primary cursor-pointer" data-bs-toggle="modal" data-bs-target="#editUserModal"></i>
                        <i class="fa fa-trash text-danger cursor-pointer" data-bs-toggle="modal" data-bs-target="#deleteModal"></i>
                    </td>
                </tr>

                <tr data-role="Admin">
                    <td><input type="checkbox" /></td>
                    <td><img class="profile-img me-1" src="/images/User/Miya.webp" /> Chloe Hayes</td>
                    <td>chloehye@gmail.com</td>
                    <td>Admin</td>
                    <td>October 5, 2025</td>
                    <td class="text-center">
                        <i class="fa fa-edit text-primary cursor-pointer" data-bs-toggle="modal" data-bs-target="#editUserModal"></i>
                        <i class="fa fa-trash text-danger cursor-pointer" data-bs-toggle="modal" data-bs-target="#deleteModal"></i>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- ADD ROLE MODAL -->
<div class="modal fade" id="addRoleModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content custom-modal">

            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Add Role</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <select class="form-select">
                        <option selected disabled>Select Role</option>
                        <option>Admin</option>
                        <option>Staff</option>
                        <option>Manager</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Description</label>
                    <input type="text" class="form-control" placeholder="Enter Description">
                </div>
            </div>

            <div class="modal-footer d-flex justify-content-end">
                <button class="btn btn-primary">Save Changes</button>
            </div>


        </div>
    </div>
</div>

<!-- ADD USER MODAL -->
<div class="modal fade" id="addUserModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content custom-modal">

            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Add User</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" placeholder="Enter First Name">
                </div>

                <div class="mb-3">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-control" placeholder="Enter Last Name">
                </div>

                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <select class="form-select">
                        <option selected disabled>Role</option>
                        <option>Admin</option>
                        <option>Staff</option>
                        <option>Manager</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Joined Date</label>
                    <input type="date" class="form-control">
                </div>

                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" placeholder="Enter Email">
                </div>

                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" placeholder="Enter Password">
                </div>

                <div class="mb-3">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" placeholder="Confirm Password">
                </div>

                <div class="mb-3">
                    <label class="form-label">Profile Image</label>
                    <input type="file" class="form-control">
                </div>
            </div>

            <div class="modal-footer d-flex justify-content-end">
                <button class="btn btn-primary">Save Changes</button>
            </div>


        </div>
    </div>
</div>

<!-- EDIT USER MODAL -->
<div class="modal fade" id="editUserModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content custom-modal">

            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Edit User</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-control" placeholder="Enter First Name">
                </div>

                <div class="mb-3">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-control" placeholder="Enter Last Name">
                </div>

                <div class="mb-3">
                    <label class="form-label">Role</label>
                    <select class="form-select">
                        <option selected disabled>Role</option>
                        <option>Admin</option>
                        <option>Staff</option>
                        <option>Manager</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label class="form-label">Joined Date</label>
                    <input type="date" class="form-control">
                </div>

                <div class="mb-3">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" placeholder="Enter Email">
                </div>

                <div class="mb-3">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" placeholder="Enter Password">
                </div>

                <div class="mb-3">
                    <label class="form-label">Confirm Password</label>
                    <input type="password" class="form-control" placeholder="Confirm Password">
                </div>

                <div class="mb-3">
                    <label class="form-label">Profile Image</label>
                    <input type="file" class="form-control">
                </div>
            </div>

            <div class="modal-footer d-flex justify-content-end">
                <button class="btn btn-primary">Save Changes</button>
            </div>


        </div>
    </div>
</div>


<!-- DELETE CONFIRM MODAL -->
<div class="modal fade" id="deleteModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Delete User</h5>
                <button class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <p class="fs-5">
                    Are you sure you want to delete  
                    <strong id="deleteProductName"></strong> ?
                </p>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button class="btn btn-danger">Delete</button>
            </div>

        </div>
    </div>
</div>

<!--JS -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const roleSelect = document.getElementById('roleSelect');
        const userTable = document.querySelector('tbody');
        const resultText = document.getElementById('resultText');

        roleSelect.addEventListener('change', () => {
            const selectedRole = roleSelect.value; // "Admin", "Staff" or "" for all
            let visibleCount = 0;

            Array.from(userTable.rows).forEach(row => {
                const rowRole = row.getAttribute('data-role');
                if (!selectedRole || rowRole === selectedRole) {
                    row.style.display = ''; // show
                    visibleCount++;
                } else {
                    row.style.display = 'none'; // hide
                }
            });

            // Optional: display message
            if (!selectedRole) {
                resultText.textContent = 'Showing all users';
            } else {
                resultText.textContent = `Showing ${selectedRole} users`;
            }
        });
    });
</script>


<!--Js End -->

<!-- CSS FIXED -->
<style>
    .profile-img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
    }

    .cursor-pointer {
        cursor: pointer;
    }

    .custom-modal {
        border-radius: 8px;
    }

    .modal-header.bg-primary,
    .modal-header.bg-warning,z
    .modal-header.bg-danger {
        color: #fff;
    }

    .modal-header.bg-warning {
        color: #212529;
    }

    .modal-body input,
    .modal-body select {
        border-radius: 5px;
    }

    .modal-footer button {
        border-radius: 5px;
    }

    .header-controls > * {
        min-width: 150px;
    }
</style>
